import {
  createContext,
  useCallback,
  useContext,
  useEffect,
  useMemo,
  useState,
} from "react";

type Language = "en" | "ko" | "zh" | "ja" | "es";

type Translations = Record<string, string>;

const TRANSLATIONS: Record<Language, Translations> = {
  en: {
    appName: "K-Saju",
    logo: "K-Saju",
    home: "Home",
    messages: "Messages",
    signIn: "Sign in",
    signOut: "Sign out",
    profile: "Profile",
    language: "Language",
    customerSupport: "Customer Support",
    faq: "FAQ",
    contact: "Contact",
    safety: "Safety",
    about: "About",
    careers: "Careers",
    newsroom: "Newsroom",
    investors: "Investors",
    blog: "Blog",
    forum: "Forum",
    events: "Events",
    partnerships: "Partnerships",
    privacy: "Privacy Policy",
    terms: "Terms of Service",
    cookies: "Cookies Policy",
    compliance: "Compliance",
    allRightsReserved: "All rights reserved.",
    myProfile: "My Profile",
    settings: "Settings",
    logout: "Log out",
    email: "Email",
    password: "Password",
    confirmPassword: "Confirm Password",
    loading: "Loading...",
    logIn: "Log In",
    createAccount: "Create Account",
    or: "OR",
    continueWithGoogle: "Continue with Google",
    continueWithApple: "Continue with Apple",
    continueWithKakao: "Continue with Kakao",
    dontHaveAccount: "Don't have an account?",
    createOne: "Create one",
    alreadyHaveAccount: "Already have an account?",
    logInHere: "Log in",
    liveTranslation: "Live Translation",
    sessionInfo: "Session Info",
    liveTranscription: "Live Transcription",
    start: "Start",
    stop: "Stop",
    speakerAUnderstands: "Speaker A understands",
    speakerBUnderstands: "Speaker B understands",
    webSpeechNotSupported:
      "Your browser may not support real-time transcription (Web Speech API). Basic recording fallback is used.",
    recording: "Recording",
    locations: "Locations",
    // Home page translations
    heroTitle: "K-Saju",
    heroSubtitle: "Discover Your Fortune with Korean Traditional Saju",
    heroSubtitleKorean: "한국 전통 사주풀이를 전 세계에",
    ctaLiveTranslation: "🎯 Experience Live Translation",
    ctaFindLocations: "📍 Find Businesses",
    whyKSajuTitle: "🌟 Why K-Saju?",
    multiLanguageTitle: "Multilingual Support",
    multiLanguageDesc: "Get accurate Saju readings without language barriers through real-time translation services in English, Chinese, Japanese, and Spanish.",
    traditionalSajuTitle: "Traditional Saju Reading",
    traditionalSajuDesc: "Experience authentic Korean traditional Saju interpretation techniques with hundreds of years of history to accurately read your destiny and future.",
    verifiedBusinessTitle: "Verified Businesses",
    verifiedBusinessDesc: "Get matched with carefully selected professional Saju reading businesses and experience reliable, high-quality consultation services.",
    personalizedMatchingTitle: "Personalized Matching",
    personalizedMatchingDesc: "AI recommends the optimal Saju reading business based on your location, preferences, and budget.",
    premiumExperienceTitle: "Premium Experience",
    premiumExperienceDesc: "Enjoy special experiences that let you feel the depth of Korean culture and memorable cultural experiences.",
    easyBookingTitle: "Easy Booking",
    easyBookingDesc: "Easily book Saju consultation appointments anytime, anywhere with our simple online booking system.",
    testimonialsTitle: "🗣️ Customer Reviews",
    testimonial1: "What an amazing experience! Thanks to real-time translation, I was able to receive in-depth Saju reading without language concerns. It was a great opportunity to understand Korean culture.",
    testimonial2: "The business matching service was really good. I could easily find a reliable business near my location, and booking was simple too. The Saju reading results were very satisfying.",
    testimonial3: "I had a truly special experience through the K-Saju platform. Being able to experience traditional Korean Saju reading in a modern way was impressive. Highly recommended!",
    customer1Name: "Sarah Johnson",
    customer1Country: "🇺🇸 USA",
    customer2Name: "田中太郎",
    customer2Country: "🇯🇵 Japan",
    customer3Name: "李小明",
    customer3Country: "🇨🇳 China",
    ctaTitle: "🚀 Start Now!",
    ctaDescription: "Experience the mysterious world of Korean traditional Saju reading. Communicate with experts through real-time translation and discover your destiny.",
    ctaStartTranslation: "🎯 Start Real-time Translation",
    ctaFindNearby: "🗺️ Find Nearby Businesses",
    // Live Translation page
    liveTranslationTitle: "🔮 Real-time Saju Translation",
    liveTranslationSubtitle: "AI-powered multilingual Saju consultation tool",
    customerLanguageSettings: "Customer Language Settings",
    customerLanguage: "Customer Language",
    customerVoice: "Customer Voice",
    businessVoice: "Business Voice",
    waitingMessage: "🟢 Waiting - Press a button to start recording",
    recordingMessage: "🔴 Recording... ({0} seconds left)",
    noConversationYet: "💭 No conversation yet",
    pressButtonToStart: "Press the button above to start voice recording",
    offlineRecordingComplete: "[Offline] Recording Complete",
    offlineRecordingSuccess: "[Offline] Voice was successfully recorded",
    testVoiceInput: "[Test] Voice Input",
    testVoiceRecorded: "[Test] Voice was successfully recorded",
  },
  ko: {
    appName: "케이사주",
    logo: "케이사주",
    home: "홈",
    messages: "메시지",
    signIn: "로그인",
    signOut: "로그아웃",
    profile: "프로필",
    language: "언어",
    customerSupport: "고객 지원",
    faq: "자주 묻는 질문",
    contact: "연락처",
    safety: "안전",
    about: "회사 소개",
    careers: "채용",
    newsroom: "뉴스룸",
    investors: "투자자",
    blog: "블로그",
    forum: "포럼",
    events: "이벤트",
    partnerships: "파트너십",
    privacy: "개인정보처리방침",
    terms: "이용약관",
    cookies: "쿠키 정책",
    compliance: "컴플라이언스",
    allRightsReserved: "모든 권리 보유.",
    myProfile: "내 프로필",
    settings: "설정",
    logout: "로그아웃",
    email: "이메일",
    password: "비밀번호",
    confirmPassword: "비밀번호 확인",
    loading: "로딩 중...",
    logIn: "로그인",
    createAccount: "계정 만들기",
    or: "또는",
    continueWithGoogle: "Google로 이용하기",
    continueWithApple: "Apple로 이용하기",
    continueWithKakao: "카카오로 이용하기",
    dontHaveAccount: "계정이 없으시나요?",
    createOne: "만들기",
    alreadyHaveAccount: "이미 계정이 있으시나요?",
    logInHere: "로그인",
    liveTranslation: "실시간 번역",
    sessionInfo: "세션 정보",
    liveTranscription: "실시간 음성 인식",
    start: "시작",
    stop: "중지",
    speakerAUnderstands: "화자 A 언어",
    speakerBUnderstands: "화자 B 언어",
    webSpeechNotSupported:
      "브라우저에서 실시간 음성 인식을 지원하지 않을 수 있습니다. 기본 녹음 기능을 사용합니다.",
    recording: "녹음중",
    locations: "위치",
    // Home page translations
    heroTitle: "🔮 K-Saju",
    heroSubtitle: "한국 전통 사주풀이를 전 세계에",
    heroSubtitleKorean: "Discover Your Fortune with Korean Traditional Saju",
    ctaLiveTranslation: "🎯 실시간 번역 체험",
    ctaFindLocations: "📍 업체 찾기",
    whyKSajuTitle: "🌟 왜 K-Saju인가요?",
    multiLanguageTitle: "다국어 지원",
    multiLanguageDesc: "영어, 중국어, 일본어, 스페인어로 실시간 번역 서비스를 제공하여 언어 장벽 없이 정확한 사주풀이를 받으실 수 있습니다.",
    traditionalSajuTitle: "전통 사주풀이",
    traditionalSajuDesc: "수백 년의 역사를 가진 한국 전통 사주풀이 기법으로 당신의 운명과 미래를 정확하게 해석해드립니다.",
    verifiedBusinessTitle: "검증된 업체",
    verifiedBusinessDesc: "엄선된 전문 사주풀이 업체들과 매칭되어 신뢰할 수 있는 고품질의 상담 서비스를 경험하세요.",
    personalizedMatchingTitle: "맞춤형 매칭",
    personalizedMatchingDesc: "당신의 위치, 선호도, 예산에 맞는 최적의 사주풀이 업체를 AI가 추천해드립니다.",
    premiumExperienceTitle: "프리미엄 경험",
    premiumExperienceDesc: "한국 문화의 깊이를 느낄 수 있는 특별한 경험과 기억에 남을 문화 체험을 제공합니다.",
    easyBookingTitle: "편리한 예약",
    easyBookingDesc: "간편한 온라인 예약 시스템으로 언제 어디서나 쉽게 사주풀이 상담을 예약하실 수 있습니다.",
    testimonialsTitle: "🗣️ 고객 후기",
    testimonial1: "정말 놀라운 경험이었어요! 실시간 번역 덕분에 언어 걱정 없이 깊이 있는 사주풀이를 받을 수 있었습니다. 한국 문화를 이해하는 좋은 기회가 되었어요.",
    testimonial2: "업체 매칭 서비스가 정말 좋았습니다. 제 위치 근처의 신뢰할 수 있는 업체를 쉽게 찾을 수 있었고, 예약도 간편했어요. 사주풀이 결과도 매우 만족스러웠습니다.",
    testimonial3: "K-Saju 플랫폼을 통해 정말 특별한 경험을 했어요. 전통적인 한국 사주풀이를 현대적인 방식으로 체험할 수 있어서 인상깊었습니다. 강력히 추천합니다!",
    customer1Name: "Sarah Johnson",
    customer1Country: "🇺🇸 미국",
    customer2Name: "田中太郎",
    customer2Country: "🇯🇵 일본",
    customer3Name: "李小明",
    customer3Country: "🇨🇳 중국",
    ctaTitle: "🚀 지금 시작하세요!",
    ctaDescription: "한국 전통 사주풀이의 신비로운 세계를 경험해보세요. 전문가와 실시간 번역으로 소통하며 당신의 운명을 알아보세요.",
    ctaStartTranslation: "🎯 실시간 번역 시작하기",
    ctaFindNearby: "🗺️ 근처 업체 찾기",
    // Live Translation page
    liveTranslationTitle: "🔮 실시간 사주 번역",
    liveTranslationSubtitle: "AI 기반 다국어 사주 상담 도구",
    customerLanguageSettings: "고객 언어 설정",
    customerLanguage: "고객 언어",
    customerVoice: "고객 음성",
    businessVoice: "업체 음성",
    waitingMessage: "🟢 대기 중 - 버튼을 눌러 녹음을 시작하세요",
    recordingMessage: "🔴 {0} 녹음 중... ({1}초 남음)",
    noConversationYet: "💭 아직 대화가 없습니다",
    pressButtonToStart: "위의 버튼을 눌러 음성 녹음을 시작해보세요",
    offlineRecordingComplete: "[오프라인] 음성 녹음 완료",
    offlineRecordingSuccess: "[오프라인] 음성이 성공적으로 녹음되었습니다",
    testVoiceInput: "[테스트] 음성 입력",
    testVoiceRecorded: "[테스트] 음성이 성공적으로 녹음되었습니다",
  },
  zh: {
    appName: "K-Saju",
    logo: "K-Saju",
    home: "首页",
    messages: "消息",
    signIn: "登录",
    signOut: "登出",
    profile: "个人资料",
    language: "语言",
    customerSupport: "客户支持",
    faq: "常见问题",
    contact: "联系我们",
    safety: "安全",
    about: "关于我们",
    careers: "招聘",
    newsroom: "新闻室",
    investors: "投资者",
    blog: "博客",
    forum: "论坛",
    events: "活动",
    partnerships: "合作伙伴",
    privacy: "隐私政策",
    terms: "服务条款",
    cookies: "Cookie政策",
    compliance: "合规性",
    allRightsReserved: "版权所有。",
    myProfile: "我的资料",
    settings: "设置",
    logout: "登出",
    email: "邮箱",
    password: "密码",
    confirmPassword: "确认密码",
    loading: "加载中...",
    logIn: "登录",
    createAccount: "创建账户",
    or: "或",
    continueWithGoogle: "使用 Google 继续",
    continueWithApple: "使用 Apple 继续",
    continueWithKakao: "使用 Kakao 继续",
    dontHaveAccount: "没有账户？",
    createOne: "创建一个",
    alreadyHaveAccount: "已有账户？",
    logInHere: "登录",
    liveTranslation: "实时翻译",
    sessionInfo: "会话信息",
    liveTranscription: "实时转录",
    start: "开始",
    stop: "停止",
    speakerAUnderstands: "说话者A语言",
    speakerBUnderstands: "说话者B语言",
    webSpeechNotSupported:
      "您的浏览器可能不支持实时语音识别（Web Speech API）。使用基本录音回退功能。",
    recording: "录音中",
    locations: "位置",
    // Home page translations
    heroTitle: "🔮 K-Saju",
    heroSubtitle: "将韩国传统四柱推向世界",
    heroSubtitleKorean: "用韩国传统四柱探索您的命运",
    ctaLiveTranslation: "🎯 体验实时翻译",
    ctaFindLocations: "📍 查找商家",
    whyKSajuTitle: "🌟 为什么选择K-Saju?",
    multiLanguageTitle: "多语言支持",
    multiLanguageDesc: "提供英语、中文、日语、西班牙语实时翻译服务，让您无语言障碍地获得准确的四柱预测。",
    traditionalSajuTitle: "传统四柱预测",
    traditionalSajuDesc: "采用拥有数百年历史的韩国传统四柱预测技法，准确解读您的命运和未来。",
    verifiedBusinessTitle: "认证商家",
    verifiedBusinessDesc: "与精选的专业四柱预测商家匹配，体验可靠的高质量咨询服务。",
    personalizedMatchingTitle: "个性化匹配",
    personalizedMatchingDesc: "AI根据您的位置、偏好和预算推荐最适合的四柱预测商家。",
    premiumExperienceTitle: "尊享体验",
    premiumExperienceDesc: "提供能够感受韩国文化深度的特殊体验和难忘的文化体验。",
    easyBookingTitle: "便捷预约",
    easyBookingDesc: "通过简便的在线预约系统，随时随地轻松预约四柱预测咨询。",
    testimonialsTitle: "🗣️ 客户评价",
    testimonial1: "真是令人惊叹的体验！得益于实时翻译，我能够在没有语言担忧的情况下接受深度四柱解读。这是了解韩国文化的好机会。",
    testimonial2: "商家匹配服务真的很棒。我能够轻松找到我位置附近的可靠商家，预约也很简单。四柱预测结果非常令人满意。",
    testimonial3: "通过K-Saju平台获得了真正特别的体验。能够以现代方式体验传统韩国四柱预测令人印象深刻。强烈推荐！",
    customer1Name: "Sarah Johnson",
    customer1Country: "🇺🇸 美国",
    customer2Name: "田中太郎",
    customer2Country: "🇯🇵 日本",
    customer3Name: "李小明",
    customer3Country: "🇨🇳 中国",
    ctaTitle: "🚀 立即开始！",
    ctaDescription: "体验韩国传统四柱预测的神秘世界。通过实时翻译与专家沟通，探索您的命运。",
    ctaStartTranslation: "🎯 开始实时翻译",
    ctaFindNearby: "🗺️ 查找附近商家",
    // Live Translation page
    liveTranslationTitle: "🔮 实时四柱翻译",
    liveTranslationSubtitle: "AI驱动的多语言四柱咨询工具",
    customerLanguageSettings: "客户语言设置",
    customerLanguage: "客户语言",
    customerVoice: "客户声音",
    businessVoice: "商家声音",
    waitingMessage: "🟢 等待中 - 按下按钮开始录音",
    recordingMessage: "🔴 {0}录音中... (剩余{1}秒)",
    noConversationYet: "💭 暂无对话",
    pressButtonToStart: "点击上方按钮开始声音录制",
    offlineRecordingComplete: "[离线]录音完成",
    offlineRecordingSuccess: "[离线]声音已成功录制",
    testVoiceInput: "[测试]声音输入",
    testVoiceRecorded: "[测试]声音已成功录制",
  },
  ja: {
    appName: "K-Saju",
    logo: "K-Saju",
    home: "ホーム",
    messages: "メッセージ",
    signIn: "サインイン",
    signOut: "サインアウト",
    profile: "プロフィール",
    language: "言語",
    customerSupport: "カスタマーサポート",
    faq: "よくある質問",
    contact: "お問い合わせ",
    safety: "安全性",
    about: "会社概要",
    careers: "採用情報",
    newsroom: "ニュースルーム",
    investors: "投資家向け情報",
    blog: "ブログ",
    forum: "フォーラム",
    events: "イベント",
    partnerships: "パートナーシップ",
    privacy: "プライバシーポリシー",
    terms: "利用規約",
    cookies: "クッキーポリシー",
    compliance: "コンプライアンス",
    allRightsReserved: "全著作権所有。",
    myProfile: "マイプロフィール",
    settings: "設定",
    logout: "ログアウト",
    email: "メールアドレス",
    password: "パスワード",
    confirmPassword: "パスワードの確認",
    loading: "読み込み中...",
    logIn: "ログイン",
    createAccount: "アカウント作成",
    or: "または",
    continueWithGoogle: "Googleで続行",
    continueWithApple: "Appleで続行",
    continueWithKakao: "Kakaoで続行",
    dontHaveAccount: "アカウントをお持ちではありませんか？",
    createOne: "作成する",
    alreadyHaveAccount: "すでにアカウントをお持ちですか？",
    logInHere: "ログイン",
    liveTranslation: "リアルタイム翻訳",
    sessionInfo: "セッション情報",
    liveTranscription: "リアルタイム音声認識",
    start: "開始",
    stop: "停止",
    speakerAUnderstands: "話者A言語",
    speakerBUnderstands: "話者B言語",
    webSpeechNotSupported:
      "お使いのブラウザではリアルタイム音声認識（Web Speech API）をサポートしていない可能性があります。基本録音機能を使用します。",
    recording: "録音中",
    locations: "場所",
    // Home page translations
    heroTitle: "🔮 K-Saju",
    heroSubtitle: "韓国伝統四柱推命を世界へ",
    heroSubtitleKorean: "韓国伝統四柱であなたの運命を発見",
    ctaLiveTranslation: "🎯 リアルタイム翻訳体験",
    ctaFindLocations: "📍 業者を探す",
    whyKSajuTitle: "🌟 なぜK-Sajuなのか？",
    multiLanguageTitle: "多言語サポート",
    multiLanguageDesc: "英語、中国語、日本語、スペイン語でリアルタイム翻訳サービスを提供し、言語の壁なく正確な四柱推命を受けることができます。",
    traditionalSajuTitle: "伝統四柱推命",
    traditionalSajuDesc: "数百年の歴史を持つ韓国伝統四柱推命技法で、あなたの運命と未来を正確に解釈いたします。",
    verifiedBusinessTitle: "認証済み業者",
    verifiedBusinessDesc: "厳選された専門四柱推命業者とマッチングされ、信頼できる高品質の相談サービスを体験してください。",
    personalizedMatchingTitle: "パーソナライズマッチング",
    personalizedMatchingDesc: "あなたの位置、好み、予算に合った最適な四柱推命業者をAIが推薦いたします。",
    premiumExperienceTitle: "プレミアム体験",
    premiumExperienceDesc: "韓国文化の深さを感じることができる特別な体験と、記憶に残る文化体験を提供します。",
    easyBookingTitle: "便利な予約",
    easyBookingDesc: "簡単なオンライン予約システムで、いつでもどこでも手軽に四柱推命相談を予約できます。",
    testimonialsTitle: "🗣️ お客様の声",
    testimonial1: "本当に素晴らしい体験でした！リアルタイム翻訳のおかげで、言語の心配なく深い四柱推命を受けることができました。韓国文化を理解する良い機会になりました。",
    testimonial2: "業者マッチングサービスが本当に良かったです。私の場所近くの信頼できる業者を簡単に見つけることができ、予約も簡単でした。四柱推命の結果も非常に満足しています。",
    testimonial3: "K-Sajuプラットフォームを通じて本当に特別な体験をしました。伝統的な韓国四柱推命を現代的な方法で体験できて印象的でした。強くお勧めします！",
    customer1Name: "Sarah Johnson",
    customer1Country: "🇺🇸 アメリカ",
    customer2Name: "田中太郎",
    customer2Country: "🇯🇵 日本",
    customer3Name: "李小明",
    customer3Country: "🇨🇳 中国",
    ctaTitle: "🚀 今すぐ始めましょう！",
    ctaDescription: "韓国伝統四柱推命の神秘的な世界を体験してください。専門家とリアルタイム翻訳でコミュニケーションし、あなたの運命を知りましょう。",
    ctaStartTranslation: "🎯 リアルタイム翻訳を開始",
    ctaFindNearby: "🗺️ 近くの業者を探す",
    // Live Translation page
    liveTranslationTitle: "🔮 リアルタイム四柱翻訳",
    liveTranslationSubtitle: "AIベースの多言語四柱相談ツール",
    customerLanguageSettings: "お客様言語設定",
    customerLanguage: "お客様言語",
    customerVoice: "お客様音声",
    businessVoice: "業者音声",
    waitingMessage: "🟢 待機中 - ボタンを押して録音を開始してください",
    recordingMessage: "🔴 {0}録音中... (残り{1}秒)",
    noConversationYet: "💭 まだ会話がありません",
    pressButtonToStart: "上のボタンを押して音声録音を開始してください",
    offlineRecordingComplete: "[オフライン]録音完了",
    offlineRecordingSuccess: "[オフライン]音声が正常に録音されました",
    testVoiceInput: "[テスト]音声入力",
    testVoiceRecorded: "[テスト]音声が正常に録音されました",
  },
  es: {
    appName: "K-Saju",
    logo: "K-Saju",
    home: "Inicio",
    messages: "Mensajes",
    signIn: "Iniciar sesión",
    signOut: "Cerrar sesión",
    profile: "Perfil",
    language: "Idioma",
    customerSupport: "Atención al Cliente",
    faq: "Preguntas Frecuentes",
    contact: "Contacto",
    safety: "Seguridad",
    about: "Acerca de",
    careers: "Empleos",
    newsroom: "Sala de Prensa",
    investors: "Inversores",
    blog: "Blog",
    forum: "Foro",
    events: "Eventos",
    partnerships: "Socios",
    privacy: "Política de Privacidad",
    terms: "Términos de Servicio",
    cookies: "Política de Cookies",
    compliance: "Cumplimiento",
    allRightsReserved: "Todos los derechos reservados.",
    myProfile: "Mi Perfil",
    settings: "Configuración",
    logout: "Cerrar sesión",
    email: "Correo electrónico",
    password: "Contraseña",
    confirmPassword: "Confirmar contraseña",
    loading: "Cargando...",
    logIn: "Iniciar sesión",
    createAccount: "Crear cuenta",
    or: "O",
    continueWithGoogle: "Continuar con Google",
    continueWithApple: "Continuar con Apple",
    continueWithKakao: "Continuar con Kakao",
    dontHaveAccount: "¿No tienes una cuenta?",
    createOne: "Crear una",
    alreadyHaveAccount: "¿Ya tienes una cuenta?",
    logInHere: "Iniciar sesión",
    liveTranslation: "Traducción en Vivo",
    sessionInfo: "Información de Sesión",
    liveTranscription: "Transcripción en Vivo",
    start: "Iniciar",
    stop: "Detener",
    speakerAUnderstands: "Idioma del Hablante A",
    speakerBUnderstands: "Idioma del Hablante B",
    webSpeechNotSupported:
      "Su navegador puede no soportar transcripción en tiempo real (Web Speech API). Se usa grabación básica como respaldo.",
    recording: "Grabando",
    locations: "Ubicaciones",
    // Home page translations
    heroTitle: "🔮 K-Saju",
    heroSubtitle: "Llevando la lectura tradicional coreana Saju al mundo",
    heroSubtitleKorean: "Descubre tu fortuna con el Saju tradicional coreano",
    ctaLiveTranslation: "🎯 Experimenta Traducción en Vivo",
    ctaFindLocations: "📍 Encontrar Negocios",
    whyKSajuTitle: "🌟 ¿Por qué K-Saju?",
    multiLanguageTitle: "Soporte Multiidioma",
    multiLanguageDesc: "Obtenga lecturas precisas de Saju sin barreras idiomáticas a través de servicios de traducción en tiempo real en inglés, chino, japonés y español.",
    traditionalSajuTitle: "Lectura Tradicional Saju",
    traditionalSajuDesc: "Experimente técnicas auténticas de interpretación Saju tradicional coreana con cientos de años de historia para leer con precisión su destino y futuro.",
    verifiedBusinessTitle: "Negocios Verificados",
    verifiedBusinessDesc: "Conéctese con negocios profesionales de lectura Saju cuidadosamente seleccionados y experimente servicios de consulta confiables y de alta calidad.",
    personalizedMatchingTitle: "Coincidencia Personalizada",
    personalizedMatchingDesc: "La IA recomienda el negocio de lectura Saju óptimo basado en su ubicación, preferencias y presupuesto.",
    premiumExperienceTitle: "Experiencia Premium",
    premiumExperienceDesc: "Disfrute de experiencias especiales que le permiten sentir la profundidad de la cultura coreana y experiencias culturales memorables.",
    easyBookingTitle: "Reserva Fácil",
    easyBookingDesc: "Reserve fácilmente citas de consulta Saju en cualquier momento y lugar con nuestro sistema de reserva en línea simple.",
    testimonialsTitle: "🗣️ Reseñas de Clientes",
    testimonial1: "¡Qué experiencia tan increíble! Gracias a la traducción en tiempo real, pude recibir una lectura Saju profunda sin preocupaciones idiomáticas. Fue una gran oportunidad para entender la cultura coreana.",
    testimonial2: "El servicio de coincidencia de negocios fue realmente bueno. Pude encontrar fácilmente un negocio confiable cerca de mi ubicación, y la reserva también fue simple. Los resultados de la lectura Saju fueron muy satisfactorios.",
    testimonial3: "Tuve una experiencia verdaderamente especial a través de la plataforma K-Saju. Poder experimentar la lectura Saju tradicional coreana de manera moderna fue impresionante. ¡Altamente recomendado!",
    customer1Name: "Sarah Johnson",
    customer1Country: "🇺🇸 EE.UU.",
    customer2Name: "田中太郎",
    customer2Country: "🇯🇵 Japón",
    customer3Name: "李小明",
    customer3Country: "🇨🇳 China",
    ctaTitle: "🚀 ¡Comience Ahora!",
    ctaDescription: "Experimente el mundo misterioso de la lectura Saju tradicional coreana. Comuníquese con expertos a través de traducción en tiempo real y descubra su destino.",
    ctaStartTranslation: "🎯 Iniciar Traducción en Tiempo Real",
    ctaFindNearby: "🗺️ Encontrar Negocios Cercanos",
    // Live Translation page
    liveTranslationTitle: "🔮 Traducción Saju en Tiempo Real",
    liveTranslationSubtitle: "Herramienta de consulta Saju multilingüe impulsada por IA",
    customerLanguageSettings: "Configuración de Idioma del Cliente",
    customerLanguage: "Idioma del Cliente",
    customerVoice: "Voz del Cliente",
    businessVoice: "Voz del Negocio",
    waitingMessage: "🟢 Esperando - Presione un botón para comenzar a grabar",
    recordingMessage: "🔴 {0} grabando... (quedan {1} segundos)",
    noConversationYet: "💭 Aún no hay conversación",
    pressButtonToStart: "Presione el botón de arriba para comenzar la grabación de voz",
    offlineRecordingComplete: "[Sin conexión] Grabación completa",
    offlineRecordingSuccess: "[Sin conexión] La voz se grabó exitosamente",
    testVoiceInput: "[Prueba] Entrada de voz",
    testVoiceRecorded: "[Prueba] La voz se grabó exitosamente",
  },
};

type I18nContextValue = {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
  availableLanguages: Language[];
};

const I18nContext = createContext<I18nContextValue | null>(null);

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguageState] = useState<Language>(() => {
    const stored = localStorage.getItem("app.lang") as Language | null;
    if (stored && ["en", "ko", "zh", "ja", "es"].includes(stored))
      return stored as Language;
    const nav = navigator.language?.toLowerCase() ?? "en";
    if (nav.startsWith("ko")) return "ko";
    if (nav.startsWith("zh")) return "zh";
    if (nav.startsWith("ja")) return "ja";
    if (nav.startsWith("es")) return "es";
    return "en";
  });

  useEffect(() => {
    localStorage.setItem("app.lang", language);
  }, [language]);

  const setLanguage = useCallback((lang: Language) => {
    setLanguageState(lang);
  }, []);

  const t = useCallback(
    (key: string) => {
      const table = TRANSLATIONS[language] ?? TRANSLATIONS.en;
      return table[key] ?? key;
    },
    [language]
  );

  const value = useMemo<I18nContextValue>(
    () => ({
      language,
      setLanguage,
      t,
      availableLanguages: ["en", "ko", "zh", "ja", "es"],
    }),
    [language, setLanguage, t]
  );

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) {
    console.error(
      "useI18n called outside I18nProvider - falling back to English"
    );
    // Return fallback context
    return {
      language: "en" as const,
      setLanguage: () => {},
      t: (key: string) => {
        const fallbacks: Record<string, string> = {
          appName: "K-Saju",
          logo: "K-Saju",
          home: "Home",
          messages: "Messages",
          signIn: "Sign in",
          signOut: "Sign out",
          profile: "Profile",
          language: "Language",
          customerSupport: "Customer Support",
          faq: "FAQ",
          contact: "Contact",
          safety: "Safety",
          about: "About",
          careers: "Careers",
          newsroom: "Newsroom",
          investors: "Investors",
          blog: "Blog",
          forum: "Forum",
          events: "Events",
          partnerships: "Partnerships",
          privacy: "Privacy Policy",
          terms: "Terms of Service",
          cookies: "Cookies Policy",
          compliance: "Compliance",
          allRightsReserved: "All rights reserved.",
          myProfile: "My Profile",
          settings: "Settings",
          logout: "Log out",
        };
        return fallbacks[key] || key;
      },
      availableLanguages: ["en", "ko", "zh", "ja", "es"] as const,
    };
  }
  return ctx;
}
