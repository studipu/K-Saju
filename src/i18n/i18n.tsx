import {
  createContext,
  useCallback,
  useContext,
  useEffect,
  useMemo,
  useState,
} from "react";

type Language = "en" | "ko" | "zh" | "ja" | "es";

type Translations = Record<string, string>;

const TRANSLATIONS: Record<Language, Translations> = {
  en: {
    appName: "K-Saju",
    logo: "K-Saju",
    home: "Home",
    messages: "Messages",
    signIn: "Sign in",
    signOut: "Sign out",
    profile: "Profile",
    language: "Language",
    customerSupport: "Customer Support",
    faq: "FAQ",
    contact: "Contact",
    safety: "Safety",
    about: "About",
    careers: "Careers",
    newsroom: "Newsroom",
    investors: "Investors",
    blog: "Blog",
    forum: "Forum",
    events: "Events",
    partnerships: "Partnerships",
    privacy: "Privacy Policy",
    terms: "Terms of Service",
    cookies: "Cookies Policy",
    compliance: "Compliance",
    allRightsReserved: "All rights reserved.",
    myProfile: "My Profile",
    settings: "Settings",
    logout: "Log out",
    email: "Email",
    password: "Password",
    confirmPassword: "Confirm Password",
    loading: "Loading...",
    logIn: "Log In",
    createAccount: "Create Account",
    or: "OR",
    continueWithGoogle: "Continue with Google",
    continueWithApple: "Continue with Apple",
    continueWithKakao: "Continue with Kakao",
    dontHaveAccount: "Don't have an account?",
    createOne: "Create one",
    alreadyHaveAccount: "Already have an account?",
    logInHere: "Log in",
    liveTranslation: "Live Translation",
    sessionInfo: "Session Info",
    liveTranscription: "Live Transcription",
    start: "Start",
    stop: "Stop",
    speakerAUnderstands: "Speaker A understands",
    speakerBUnderstands: "Speaker B understands",
    webSpeechNotSupported:
      "Your browser may not support real-time transcription (Web Speech API). Basic recording fallback is used.",
    recording: "Recording",
    liveTranslationTitle: "Real-time Translation",
    liveTranslationSubtitle: "AI-powered multilingual communication tool",
    customerLanguageSettings: "Customer Language Settings",
    customerLanguage: "Customer Language",
    customerVoice: "ðŸŽ¤ Customer Voice",
    businessVoice: "ðŸŽ¯ Business Voice",
    waitingMessage: "ðŸŽ§ Waiting - Press a button to start recording",
    recordingMessage: "Recording {0} ({1} seconds left)",
    secondsLeft: "seconds left",
    noConversationYet: "ðŸ’¬ No conversation yet",
    pressButtonToStart: "Press a button above to start recording",
    testVoiceInput: "[Test] Voice input",
    testVoiceRecorded: "[Test] Voice successfully recorded",
    offlineRecordingComplete: "[Offline] Recording complete",
    offlineRecordingSuccess: "[Offline] Voice successfully recorded",
    // Home page translations
    heroTitle: "Meet Korean Saju Culture\nwith the World",
    heroSubtitle: "Experience traditional Korean Saju culture\nanywhere in the world with AI-based Saju services",
    heroButton: "Start Saju Reading",
    aiServices: "Saju Services",
    todayFortune: "Today's Fortune",
    sajuAnalysis: "Saju Analysis",
    compatibility: "Compatibility",
    nameCreation: "Name Creation",
    popularServices: "Popular Saju Services",
    recommendedBy: "Recommended by K-Saju",
    hotDeals: "Saju Special Offers & Discounts",
    aiSajuAnalysis: "AI Saju Analysis",
    compatibilityAnalysis: "Compatibility Analysis",
    nameCreationService: "Name Creation",
    tarotCard: "Tarot Card",
    todayFortuneService: "Today's Fortune",
    sajuConsultation: "Saju Consultation",
    dreamInterpretation: "Dream Interpretation",
    aiSajuConsultation: "AI Saju Consultation",
    compatibilityAnalysisPro: "Compatibility Analysis Pro",
    nameCreationPro: "Name Creation Pro",
    tarotReading: "Tarot Reading",
    dreamConsultation: "Dream Consultation",
    fortuneAnalysis: "Fortune Analysis",
    sajuMyeongri: "Saju Myeongri",
    sajuPackage: "Saju Package Deal",
    annualSaju: "Annual Saju Subscription",
    newMemberBenefit: "New Member Benefit",
    premiumSaju: "Premium Saju",
    businessSaju: "Business Saju",
    sajuMasterPack: "Saju Master Pack",
    sajuStarterPack: "Saju Starter Pack"
  },
  ko: {
    appName: "ì¼€ì´ì‚¬ì£¼",
    logo: "ì¼€ì´ì‚¬ì£¼",
    home: "í™ˆ",
    messages: "ë©”ì‹œì§€",
    signIn: "ë¡œê·¸ì¸",
    signOut: "ë¡œê·¸ì•„ì›ƒ",
    profile: "í”„ë¡œí•„",
    language: "ì–¸ì–´",
    customerSupport: "ê³ ê° ì§€ì›",
    faq: "ìžì£¼ ë¬»ëŠ” ì§ˆë¬¸",
    contact: "ì—°ë½ì²˜",
    safety: "ì•ˆì „",
    about: "íšŒì‚¬ ì†Œê°œ",
    careers: "ì±„ìš©",
    newsroom: "ë‰´ìŠ¤ë£¸",
    investors: "íˆ¬ìžìž",
    blog: "ë¸”ë¡œê·¸",
    forum: "í¬ëŸ¼",
    events: "ì´ë²¤íŠ¸",
    partnerships: "íŒŒíŠ¸ë„ˆì‹­",
    privacy: "ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨",
    terms: "ì´ìš©ì•½ê´€",
    cookies: "ì¿ í‚¤ ì •ì±…",
    compliance: "ì»´í”Œë¼ì´ì–¸ìŠ¤",
    allRightsReserved: "ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .",
    myProfile: "ë‚´ í”„ë¡œí•„",
    settings: "ì„¤ì •",
    logout: "ë¡œê·¸ì•„ì›ƒ",
    email: "ì´ë©”ì¼",
    password: "ë¹„ë°€ë²ˆí˜¸",
    confirmPassword: "ë¹„ë°€ë²ˆí˜¸ í™•ì¸",
    loading: "ë¡œë”© ì¤‘...",
    logIn: "ë¡œê·¸ì¸",
    createAccount: "ê³„ì • ë§Œë“¤ê¸°",
    or: "ë˜ëŠ”",
    continueWithGoogle: "Googleë¡œ ì´ìš©í•˜ê¸°",
    continueWithApple: "Appleë¡œ ì´ìš©í•˜ê¸°",
    continueWithKakao: "ì¹´ì¹´ì˜¤ë¡œ ì´ìš©í•˜ê¸°",
    dontHaveAccount: "ê³„ì •ì´ ì—†ìœ¼ì‹œë‚˜ìš”?",
    createOne: "ë§Œë“¤ê¸°",
    alreadyHaveAccount: "ì´ë¯¸ ê³„ì •ì´ ìžˆìœ¼ì‹œë‚˜ìš”?",
    logInHere: "ë¡œê·¸ì¸",
    liveTranslation: "ì‹¤ì‹œê°„ ë²ˆì—­",
    sessionInfo: "ì„¸ì…˜ ì •ë³´",
    liveTranscription: "ì‹¤ì‹œê°„ ìŒì„± ì¸ì‹",
    start: "ì‹œìž‘",
    stop: "ì¤‘ì§€",
    speakerAUnderstands: "í™”ìž A ì–¸ì–´",
    speakerBUnderstands: "í™”ìž B ì–¸ì–´",
    webSpeechNotSupported:
      "ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤ì‹œê°„ ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ë…¹ìŒ ê¸°ëŠ¥ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.",
    recording: "ë…¹ìŒì¤‘",
    liveTranslationTitle: "ì‹¤ì‹œê°„ ì‚¬ì£¼ ë²ˆì—­",
    liveTranslationSubtitle: "AI ê¸°ë°˜ ë‹¤êµ­ì–´ ì†Œí†µ ë„êµ¬",
    customerLanguageSettings: "ê³ ê° ì–¸ì–´ ì„¤ì •",
    customerLanguage: "ê³ ê° ì–¸ì–´",
    customerVoice: "ðŸŽ¤ ê³ ê° ìŒì„±",
    businessVoice: "ðŸŽ¯ ì—…ì²´ ìŒì„±",
    waitingMessage: "ðŸŽ§ ëŒ€ê¸°ì¤‘ - ë²„íŠ¼ì„ ëˆŒëŸ¬ ë…¹ìŒì„ ì‹œìž‘í•˜ì„¸ìš”",
    recordingMessage: "ë…¹ìŒì¤‘ {0} ({1}ì´ˆ ë‚¨ìŒ)",
    secondsLeft: "ì´ˆ ë‚¨ìŒ",
    noConversationYet: "ðŸ’¬ ì•„ì§ ëŒ€í™”ê°€ ì—†ìŠµë‹ˆë‹¤",
    pressButtonToStart: "ìœ„ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë…¹ìŒì„ ì‹œìž‘í•˜ì„¸ìš”",
    testVoiceInput: "[í…ŒìŠ¤íŠ¸] ìŒì„± ìž…ë ¥",
    testVoiceRecorded: "[í…ŒìŠ¤íŠ¸] ìŒì„±ì´ ì •ìƒì ìœ¼ë¡œ ìž…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤",
    offlineRecordingComplete: "[ì˜¤í”„ë¼ì¸] ìŒì„± ë…¹ìŒ ì™„ë£Œ",
    offlineRecordingSuccess: "[ì˜¤í”„ë¼ì¸] ìŒì„±ì´ ì„±ê³µì ìœ¼ë¡œ ë…¹ìŒë˜ì—ˆìŠµë‹ˆë‹¤",
    // Home page translations
    heroTitle: "í•œêµ­ì˜ ì‚¬ì£¼ ë¬¸í™”ë¥¼\nì „ ì„¸ê³„ì™€ ë§Œë‚˜ë‹¤",
    heroSubtitle: "AI ê¸°ë°˜ ì‚¬ì£¼ ì„œë¹„ìŠ¤ë¡œ í•œêµ­ì˜ ì „í†µ ì‚¬ì£¼ ë¬¸í™”ë¥¼\nì „ ì„¸ê³„ ì–´ë””ì„œë“  ê²½í—˜í•˜ì„¸ìš”",
    heroButton: "ì‚¬ì£¼ ë³´ê¸° ì‹œìž‘í•˜ê¸°",
    aiServices: "ì‚¬ì£¼ ì„œë¹„ìŠ¤",
    todayFortune: "ì˜¤ëŠ˜ì˜ ìš´ì„¸",
    sajuAnalysis: "ì‚¬ì£¼ ë¶„ì„",
    compatibility: "ê¶í•© ë¶„ì„",
    nameCreation: "ì´ë¦„ ìž‘ëª…",
    popularServices: "ì¸ê¸° ì‚¬ì£¼ ì„œë¹„ìŠ¤",
    recommendedBy: "K-Saju ì¶”ì²œ",
    hotDeals: "ì‚¬ì£¼ íŠ¹ê°€ & í• ì¸",
    aiSajuAnalysis: "AI ì‚¬ì£¼ ë¶„ì„",
    compatibilityAnalysis: "ê¶í•© ë¶„ì„",
    nameCreationService: "ì´ë¦„ ìž‘ëª…",
    tarotCard: "íƒ€ë¡œ ì¹´ë“œ",
    todayFortuneService: "ì˜¤ëŠ˜ì˜ ìš´ì„¸",
    sajuConsultation: "ì‚¬ì£¼ ìƒë‹´",
    dreamInterpretation: "ê¿ˆ í•´ëª½",
    aiSajuConsultation: "AI ì‚¬ì£¼ ìƒë‹´",
    compatibilityAnalysisPro: "ê¶í•© ë¶„ì„ ì „ë¬¸",
    nameCreationPro: "ì´ë¦„ ìž‘ëª… ì „ë¬¸",
    tarotReading: "íƒ€ë¡œ ë¦¬ë”©",
    dreamConsultation: "ê¿ˆ í•´ëª½ ìƒë‹´",
    fortuneAnalysis: "ìš´ì„¸ ë¶„ì„",
    sajuMyeongri: "ì‚¬ì£¼ ëª…ë¦¬í•™",
    sajuPackage: "ì‚¬ì£¼ íŒ¨í‚¤ì§€ í• ì¸",
    annualSaju: "ì—°ê°„ ì‚¬ì£¼ êµ¬ë…",
    newMemberBenefit: "ì‹ ê·œ íšŒì› í˜œíƒ",
    premiumSaju: "í”„ë¦¬ë¯¸ì—„ ì‚¬ì£¼",
    businessSaju: "ê¸°ì—…ìš© ì‚¬ì£¼",
    sajuMasterPack: "ì‚¬ì£¼ ë§ˆìŠ¤í„°íŒ©",
    sajuStarterPack: "ì‚¬ì£¼ ìŠ¤íƒ€í„°íŒ©"
  },
  zh: {
    appName: "K-Saju",
    logo: "K-Saju",
    home: "é¦–é¡µ",
    messages: "æ¶ˆæ¯",
    signIn: "ç™»å½•",
    signOut: "ç™»å‡º",
    profile: "ä¸ªäººèµ„æ–™",
    language: "è¯­è¨€",
    customerSupport: "å®¢æˆ·æ”¯æŒ",
    faq: "å¸¸è§é—®é¢˜",
    contact: "è”ç³»æˆ‘ä»¬",
    safety: "å®‰å…¨",
    about: "å…³äºŽæˆ‘ä»¬",
    careers: "æ‹›è˜",
    newsroom: "æ–°é—»å®¤",
    investors: "æŠ•èµ„è€…",
    blog: "åšå®¢",
    forum: "è®ºå›",
    events: "æ´»åŠ¨",
    partnerships: "åˆä½œä¼™ä¼´",
    privacy: "éšç§æ”¿ç­–",
    terms: "æœåŠ¡æ¡æ¬¾",
    cookies: "Cookieæ”¿ç­–",
    compliance: "åˆè§„æ€§",
    allRightsReserved: "ç‰ˆæƒæ‰€æœ‰ã€‚",
    myProfile: "æˆ‘çš„èµ„æ–™",
    settings: "è®¾ç½®",
    logout: "ç™»å‡º",
    email: "é‚®ç®±",
    password: "å¯†ç ",
    confirmPassword: "ç¡®è®¤å¯†ç ",
    loading: "åŠ è½½ä¸­...",
    logIn: "ç™»å½•",
    createAccount: "åˆ›å»ºè´¦æˆ·",
    or: "æˆ–",
    continueWithGoogle: "ä½¿ç”¨ Google ç»§ç»­",
    continueWithApple: "ä½¿ç”¨ Apple ç»§ç»­",
    continueWithKakao: "ä½¿ç”¨ Kakao ç»§ç»­",
    dontHaveAccount: "æ²¡æœ‰è´¦æˆ·ï¼Ÿ",
    createOne: "åˆ›å»ºä¸€ä¸ª",
    alreadyHaveAccount: "å·²æœ‰è´¦æˆ·ï¼Ÿ",
    logInHere: "ç™»å½•",
    liveTranslation: "å®žæ—¶ç¿»è¯‘",
    sessionInfo: "ä¼šè¯ä¿¡æ¯",
    liveTranscription: "å®žæ—¶è½¬å½•",
    start: "å¼€å§‹",
    stop: "åœæ­¢",
    speakerAUnderstands: "è¯´è¯è€…Aè¯­è¨€",
    speakerBUnderstands: "è¯´è¯è€…Bè¯­è¨€",
    webSpeechNotSupported:
      "æ‚¨çš„æµè§ˆå™¨å¯èƒ½ä¸æ”¯æŒå®žæ—¶è¯­éŸ³è¯†åˆ«ï¼ˆWeb Speech APIï¼‰ã€‚ä½¿ç”¨åŸºæœ¬å½•éŸ³å›žé€€åŠŸèƒ½ã€‚",
    recording: "å½•éŸ³ä¸­",
    liveTranslationTitle: "å®žæ—¶å››æŸ±ç¿»è¯‘",
    liveTranslationSubtitle: "AIé©±åŠ¨çš„å¤šè¯­è¨€æ²Ÿé€šå·¥å…·",
    customerLanguageSettings: "å®¢æˆ·è¯­è¨€è®¾ç½®",
    customerLanguage: "å®¢æˆ·è¯­è¨€",
    customerVoice: "ðŸŽ¤ å®¢æˆ·å£°éŸ³",
    businessVoice: "ðŸŽ¯ å•†å®¶å£°éŸ³",
    waitingMessage: "ðŸŽ§ ç­‰å¾…ä¸­ - æŒ‰æŒ‰é’®å¼€å§‹å½•éŸ³",
    recordingMessage: "å½•éŸ³ä¸­ {0} ({1}ç§’å‰©ä½™)",
    secondsLeft: "ç§’å‰©ä½™",
    noConversationYet: "ðŸ’¬ æš‚æ— å¯¹è¯",
    pressButtonToStart: "ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹å½•éŸ³",
    testVoiceInput: "[æµ‹è¯•] è¯­éŸ³è¾“å…¥",
    testVoiceRecorded: "[æµ‹è¯•] è¯­éŸ³æˆåŠŸå½•åˆ¶",
    offlineRecordingComplete: "[ç¦»çº¿] å½•éŸ³å®Œæˆ",
    offlineRecordingSuccess: "[ç¦»çº¿] è¯­éŸ³æˆåŠŸå½•åˆ¶",
    // Home page translations
    heroTitle: "ä¸Žå…¨ä¸–ç•Œç›¸é‡\néŸ©å›½å››æŸ±æ–‡åŒ–",
    heroSubtitle: "é€šè¿‡AIå››æŸ±æœåŠ¡ä½“éªŒä¼ ç»ŸéŸ©å›½å››æŸ±æ–‡åŒ–\nåœ¨ä¸–ç•Œä»»ä½•åœ°æ–¹",
    heroButton: "å¼€å§‹å››æŸ±å åœ",
    aiServices: "å››æŸ±æœåŠ¡",
    todayFortune: "ä»Šæ—¥è¿åŠ¿",
    sajuAnalysis: "å››æŸ±åˆ†æž",
    compatibility: "ç¼˜åˆ†åˆ†æž",
    nameCreation: "èµ·åæœåŠ¡",
    popularServices: "çƒ­é—¨å››æŸ±æœåŠ¡",
    recommendedBy: "K-SajuæŽ¨è",
    hotDeals: "å››æŸ±ç‰¹ä»·&æŠ˜æ‰£",
    aiSajuAnalysis: "AIå››æŸ±åˆ†æž",
    compatibilityAnalysis: "ç¼˜åˆ†åˆ†æž",
    nameCreationService: "èµ·åæœåŠ¡",
    tarotCard: "å¡”ç½—ç‰Œ",
    todayFortuneService: "ä»Šæ—¥è¿åŠ¿",
    sajuConsultation: "å››æŸ±å’¨è¯¢",
    dreamInterpretation: "è§£æ¢¦",
    aiSajuConsultation: "AIå››æŸ±å’¨è¯¢",
    compatibilityAnalysisPro: "ä¸“ä¸šç¼˜åˆ†åˆ†æž",
    nameCreationPro: "ä¸“ä¸šèµ·å",
    tarotReading: "å¡”ç½—å åœ",
    dreamConsultation: "è§£æ¢¦å’¨è¯¢",
    fortuneAnalysis: "è¿åŠ¿åˆ†æž",
    sajuMyeongri: "å››æŸ±å‘½ç†å­¦",
    sajuPackage: "å››æŸ±å¥—é¤ä¼˜æƒ ",
    annualSaju: "å¹´åº¦å››æŸ±è®¢é˜…",
    newMemberBenefit: "æ–°ä¼šå‘˜ä¼˜æƒ ",
    premiumSaju: "é«˜çº§å››æŸ±",
    businessSaju: "ä¼ä¸šå››æŸ±",
    sajuMasterPack: "å››æŸ±å¤§å¸ˆåŒ…",
    sajuStarterPack: "å››æŸ±å…¥é—¨åŒ…"
  },
  ja: {
    appName: "K-Saju",
    logo: "K-Saju",
    home: "ãƒ›ãƒ¼ãƒ ",
    messages: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
    signIn: "ã‚µã‚¤ãƒ³ã‚¤ãƒ³",
    signOut: "ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆ",
    profile: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
    language: "è¨€èªž",
    customerSupport: "ã‚«ã‚¹ã‚¿ãƒžãƒ¼ã‚µãƒãƒ¼ãƒˆ",
    faq: "ã‚ˆãã‚ã‚‹è³ªå•",
    contact: "ãŠå•ã„åˆã‚ã›",
    safety: "å®‰å…¨æ€§",
    about: "ä¼šç¤¾æ¦‚è¦",
    careers: "æŽ¡ç”¨æƒ…å ±",
    newsroom: "ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ ",
    investors: "æŠ•è³‡å®¶å‘ã‘æƒ…å ±",
    blog: "ãƒ–ãƒ­ã‚°",
    forum: "ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ",
    events: "ã‚¤ãƒ™ãƒ³ãƒˆ",
    partnerships: "ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—",
    privacy: "ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼",
    terms: "åˆ©ç”¨è¦ç´„",
    cookies: "ã‚¯ãƒƒã‚­ãƒ¼ãƒãƒªã‚·ãƒ¼",
    compliance: "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹",
    allRightsReserved: "å…¨è‘—ä½œæ¨©æ‰€æœ‰ã€‚",
    myProfile: "ãƒžã‚¤ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
    settings: "è¨­å®š",
    logout: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
    email: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
    password: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
    confirmPassword: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ç¢ºèª",
    loading: "èª­ã¿è¾¼ã¿ä¸­...",
    logIn: "ãƒ­ã‚°ã‚¤ãƒ³",
    createAccount: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ",
    or: "ã¾ãŸã¯",
    continueWithGoogle: "Googleã§ç¶šè¡Œ",
    continueWithApple: "Appleã§ç¶šè¡Œ",
    continueWithKakao: "Kakaoã§ç¶šè¡Œ",
    dontHaveAccount: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ",
    createOne: "ä½œæˆã™ã‚‹",
    alreadyHaveAccount: "ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ",
    logInHere: "ãƒ­ã‚°ã‚¤ãƒ³",
    liveTranslation: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¿»è¨³",
    sessionInfo: "ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±",
    liveTranscription: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°èªè­˜",
    start: "é–‹å§‹",
    stop: "åœæ­¢",
    speakerAUnderstands: "è©±è€…Aè¨€èªž",
    speakerBUnderstands: "è©±è€…Bè¨€èªž",
    webSpeechNotSupported:
      "ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°èªè­˜ï¼ˆWeb Speech APIï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚åŸºæœ¬éŒ²éŸ³æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚",
    recording: "éŒ²éŸ³ä¸­",
    liveTranslationTitle: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å››æŸ±ç¿»è¨³",
    liveTranslationSubtitle: "AIé§†å‹•ã®å¤šè¨€èªžã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«",
    customerLanguageSettings: "é¡§å®¢è¨€èªžè¨­å®š",
    customerLanguage: "é¡§å®¢è¨€èªž",
    customerVoice: "ðŸŽ¤ é¡§å®¢éŸ³å£°",
    businessVoice: "ðŸŽ¯ äº‹æ¥­è€…éŸ³å£°",
    waitingMessage: "ðŸŽ§ å¾…æ©Ÿä¸­ - ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦éŒ²éŸ³é–‹å§‹",
    recordingMessage: "éŒ²éŸ³ä¸­ {0} ({1}ç§’æ®‹ã‚Š)",
    secondsLeft: "ç§’æ®‹ã‚Š",
    noConversationYet: "ðŸ’¬ ã¾ã ä¼šè©±ãŒã‚ã‚Šã¾ã›ã‚“",
    pressButtonToStart: "ä¸Šã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦éŒ²éŸ³ã‚’é–‹å§‹ã—ã¦ãã ã•ã„",
    testVoiceInput: "[ãƒ†ã‚¹ãƒˆ] éŸ³å£°å…¥åŠ›",
    testVoiceRecorded: "[ãƒ†ã‚¹ãƒˆ] éŸ³å£°ãŒæ­£å¸¸ã«éŒ²éŸ³ã•ã‚Œã¾ã—ãŸ",
    offlineRecordingComplete: "[ã‚ªãƒ•ãƒ©ã‚¤ãƒ³] éŒ²éŸ³å®Œäº†",
    offlineRecordingSuccess: "[ã‚ªãƒ•ãƒ©ã‚¤ãƒ³] éŸ³å£°ãŒæ­£å¸¸ã«éŒ²éŸ³ã•ã‚Œã¾ã—ãŸ",
    // Home page translations
    heroTitle: "éŸ“å›½ã®å››æŸ±æ–‡åŒ–ã‚’\nä¸–ç•Œã¨å‡ºä¼šã†",
    heroSubtitle: "AIå››æŸ±ã‚µãƒ¼ãƒ“ã‚¹ã§éŸ“å›½ã®ä¼çµ±å››æŸ±æ–‡åŒ–ã‚’\nä¸–ç•Œä¸­ã©ã“ã§ã‚‚ä½“é¨“",
    heroButton: "å››æŸ±å ã„ã‚’å§‹ã‚ã‚‹",
    aiServices: "å››æŸ±ã‚µãƒ¼ãƒ“ã‚¹",
    todayFortune: "ä»Šæ—¥ã®é‹å‹¢",
    sajuAnalysis: "å››æŸ±åˆ†æž",
    compatibility: "ç›¸æ€§åˆ†æž",
    nameCreation: "å‘½åã‚µãƒ¼ãƒ“ã‚¹",
    popularServices: "äººæ°—å››æŸ±ã‚µãƒ¼ãƒ“ã‚¹",
    recommendedBy: "K-SajuãŠã™ã™ã‚",
    hotDeals: "å››æŸ±ç‰¹ä¾¡&å‰²å¼•",
    aiSajuAnalysis: "AIå››æŸ±åˆ†æž",
    compatibilityAnalysis: "ç›¸æ€§åˆ†æž",
    nameCreationService: "å‘½åã‚µãƒ¼ãƒ“ã‚¹",
    tarotCard: "ã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰",
    todayFortuneService: "ä»Šæ—¥ã®é‹å‹¢",
    sajuConsultation: "å››æŸ±ç›¸è«‡",
    dreamInterpretation: "å¤¢å ã„",
    aiSajuConsultation: "AIå››æŸ±ç›¸è«‡",
    compatibilityAnalysisPro: "ãƒ—ãƒ­ç›¸æ€§åˆ†æž",
    nameCreationPro: "ãƒ—ãƒ­å‘½å",
    tarotReading: "ã‚¿ãƒ­ãƒƒãƒˆãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°",
    dreamConsultation: "å¤¢å ã„ç›¸è«‡",
    fortuneAnalysis: "é‹å‹¢åˆ†æž",
    sajuMyeongri: "å››æŸ±å‘½ç†å­¦",
    sajuPackage: "å››æŸ±ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‰²å¼•",
    annualSaju: "å¹´é–“å››æŸ±è³¼èª­",
    newMemberBenefit: "æ–°è¦ä¼šå“¡ç‰¹å…¸",
    premiumSaju: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ å››æŸ±",
    businessSaju: "ãƒ“ã‚¸ãƒã‚¹å››æŸ±",
    sajuMasterPack: "å››æŸ±ãƒžã‚¹ã‚¿ãƒ¼ãƒ‘ãƒƒã‚¯",
    sajuStarterPack: "å››æŸ±ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ãƒ‘ãƒƒã‚¯",
  },
  es: {
    appName: "K-Saju",
    logo: "K-Saju",
    home: "Inicio",
    messages: "Mensajes",
    signIn: "Iniciar sesiÃ³n",
    signOut: "Cerrar sesiÃ³n",
    profile: "Perfil",
    language: "Idioma",
    customerSupport: "AtenciÃ³n al Cliente",
    faq: "Preguntas Frecuentes",
    contact: "Contacto",
    safety: "Seguridad",
    about: "Acerca de",
    careers: "Empleos",
    newsroom: "Sala de Prensa",
    investors: "Inversores",
    blog: "Blog",
    forum: "Foro",
    events: "Eventos",
    partnerships: "Socios",
    privacy: "PolÃ­tica de Privacidad",
    terms: "TÃ©rminos de Servicio",
    cookies: "PolÃ­tica de Cookies",
    compliance: "Cumplimiento",
    allRightsReserved: "Todos los derechos reservados.",
    myProfile: "Mi Perfil",
    settings: "ConfiguraciÃ³n",
    logout: "Cerrar sesiÃ³n",
    email: "Correo electrÃ³nico",
    password: "ContraseÃ±a",
    confirmPassword: "Confirmar contraseÃ±a",
    loading: "Cargando...",
    logIn: "Iniciar sesiÃ³n",
    createAccount: "Crear cuenta",
    or: "O",
    continueWithGoogle: "Continuar con Google",
    continueWithApple: "Continuar con Apple",
    continueWithKakao: "Continuar con Kakao",
    dontHaveAccount: "Â¿No tienes una cuenta?",
    createOne: "Crear una",
    alreadyHaveAccount: "Â¿Ya tienes una cuenta?",
    logInHere: "Iniciar sesiÃ³n",
    liveTranslation: "TraducciÃ³n en Vivo",
    sessionInfo: "InformaciÃ³n de SesiÃ³n",
    liveTranscription: "TranscripciÃ³n en Vivo",
    start: "Iniciar",
    stop: "Detener",
    speakerAUnderstands: "Idioma del Hablante A",
    speakerBUnderstands: "Idioma del Hablante B",
    webSpeechNotSupported:
      "Su navegador puede no soportar transcripciÃ³n en tiempo real (Web Speech API). Se usa grabaciÃ³n bÃ¡sica como respaldo.",
    recording: "Grabando",
    liveTranslationTitle: "TraducciÃ³n en Tiempo Real de Cuatro Pilares",
    liveTranslationSubtitle: "Herramienta de comunicaciÃ³n multilingÃ¼e impulsada por IA",
    customerLanguageSettings: "ConfiguraciÃ³n de Idioma del Cliente",
    customerLanguage: "Idioma del Cliente",
    customerVoice: "ðŸŽ¤ Voz del Cliente",
    businessVoice: "ðŸŽ¯ Voz del Negocio",
    waitingMessage: "ðŸŽ§ Esperando - Presiona un botÃ³n para comenzar a grabar",
    recordingMessage: "Grabando {0} ({1} segundos restantes)",
    secondsLeft: "segundos restantes",
    noConversationYet: "ðŸ’¬ AÃºn no hay conversaciÃ³n",
    pressButtonToStart: "Presiona un botÃ³n arriba para comenzar a grabar",
    testVoiceInput: "[Prueba] Entrada de voz",
    testVoiceRecorded: "[Prueba] Voz grabada exitosamente",
    offlineRecordingComplete: "[Sin conexiÃ³n] GrabaciÃ³n completa",
    offlineRecordingSuccess: "[Sin conexiÃ³n] Voz grabada exitosamente",
    // Home page translations
    heroTitle: "Conoce la Cultura Saju\nCoreana con el Mundo",
    heroSubtitle: "Experimenta la cultura tradicional Saju coreana\nen cualquier parte del mundo con servicios Saju basados en IA",
    heroButton: "Comenzar Lectura Saju",
    aiServices: "Servicios Saju",
    todayFortune: "Fortuna de Hoy",
    sajuAnalysis: "AnÃ¡lisis Saju",
    compatibility: "AnÃ¡lisis de Compatibilidad",
    nameCreation: "CreaciÃ³n de Nombres",
    popularServices: "Servicios Saju Populares",
    recommendedBy: "Recomendado por K-Saju",
    hotDeals: "Ofertas Especiales Saju & Descuentos",
    aiSajuAnalysis: "AnÃ¡lisis Saju IA",
    compatibilityAnalysis: "AnÃ¡lisis de Compatibilidad",
    nameCreationService: "CreaciÃ³n de Nombres",
    tarotCard: "Tarot",
    todayFortuneService: "Fortuna de Hoy",
    sajuConsultation: "Consulta Saju",
    dreamInterpretation: "InterpretaciÃ³n de SueÃ±os",
    aiSajuConsultation: "Consulta Saju IA",
    compatibilityAnalysisPro: "AnÃ¡lisis de Compatibilidad Pro",
    nameCreationPro: "CreaciÃ³n de Nombres Pro",
    tarotReading: "Lectura de Tarot",
    dreamConsultation: "Consulta de SueÃ±os",
    fortuneAnalysis: "AnÃ¡lisis de Fortuna",
    sajuMyeongri: "Saju Myeongri",
    sajuPackage: "Paquete Saju con Descuento",
    annualSaju: "SuscripciÃ³n Anual Saju",
    newMemberBenefit: "Beneficio Nuevo Miembro",
    premiumSaju: "Saju Premium",
    businessSaju: "Saju Empresarial",
    sajuMasterPack: "Paquete Maestro Saju",
    sajuStarterPack: "Paquete Inicial Saju",
  },
};

type I18nContextValue = {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
  availableLanguages: Language[];
};

const I18nContext = createContext<I18nContextValue | null>(null);

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguageState] = useState<Language>(() => {
    const stored = localStorage.getItem("app.lang") as Language | null;
    if (stored && ["en", "ko", "zh", "ja", "es"].includes(stored))
      return stored as Language;
    const nav = navigator.language?.toLowerCase() ?? "en";
    if (nav.startsWith("ko")) return "ko";
    if (nav.startsWith("zh")) return "zh";
    if (nav.startsWith("ja")) return "ja";
    if (nav.startsWith("es")) return "es";
    return "en";
  });

  useEffect(() => {
    localStorage.setItem("app.lang", language);
  }, [language]);

  const setLanguage = useCallback((lang: Language) => {
    setLanguageState(lang);
  }, []);

  const t = useCallback(
    (key: string) => {
      const table = TRANSLATIONS[language] ?? TRANSLATIONS.en;
      return table[key] ?? key;
    },
    [language]
  );

  const value = useMemo<I18nContextValue>(
    () => ({
      language,
      setLanguage,
      t,
      availableLanguages: ["en", "ko", "zh", "ja", "es"],
    }),
    [language, setLanguage, t]
  );

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) {
    console.error(
      "useI18n called outside I18nProvider - falling back to English"
    );
    // Return fallback context
    return {
      language: "en" as const,
      setLanguage: () => {},
      t: (key: string) => {
        const fallbacks: Record<string, string> = {
          appName: "K-Saju",
          logo: "K-Saju",
          home: "Home",
          messages: "Messages",
          signIn: "Sign in",
          signOut: "Sign out",
          profile: "Profile",
          language: "Language",
          customerSupport: "Customer Support",
          faq: "FAQ",
          contact: "Contact",
          safety: "Safety",
          about: "About",
          careers: "Careers",
          newsroom: "Newsroom",
          investors: "Investors",
          blog: "Blog",
          forum: "Forum",
          events: "Events",
          partnerships: "Partnerships",
          privacy: "Privacy Policy",
          terms: "Terms of Service",
          cookies: "Cookies Policy",
          compliance: "Compliance",
          allRightsReserved: "All rights reserved.",
          myProfile: "My Profile",
          settings: "Settings",
          logout: "Log out",
          liveTranslation: "Live Translation",
          liveTranslationTitle: "Real-time Translation",
          liveTranslationSubtitle: "AI-powered multilingual communication tool",
          customerLanguageSettings: "Customer Language Settings",
          customerLanguage: "Customer Language",
          customerVoice: "ðŸŽ¤ Customer Voice",
          businessVoice: "ðŸŽ¯ Business Voice",
          waitingMessage: "ðŸŽ§ Waiting - Press a button to start recording",
          recordingMessage: "Recording {0} ({1} seconds left)",
          secondsLeft: "seconds left",
          noConversationYet: "ðŸ’¬ No conversation yet",
          pressButtonToStart: "Press a button above to start recording",
          stop: "Stop",
          webSpeechNotSupported: "Your browser may not support real-time transcription (Web Speech API). Basic recording fallback is used.",
          testVoiceInput: "[Test] Voice input",
          testVoiceRecorded: "[Test] Voice successfully recorded",
          offlineRecordingComplete: "[Offline] Recording complete",
          offlineRecordingSuccess: "[Offline] Voice successfully recorded",
        };
        return fallbacks[key] || key;
      },
      availableLanguages: ["en", "ko", "zh", "ja", "es"] as const,
    };
  }
  return ctx;
}
